// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource mysql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "mysql"
}

generator client {
  provider = "prisma-client-js"
}

model Post {
  id       String  @id @default(cuid())
  title    String  @default("")
  content  Json    @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  author   User?   @relation("Post_author", fields: [authorId], references: [id])
  authorId String? @map("author")
  tags     Tag[]   @relation("Post_tags")

  @@index([authorId])
}

model Tag {
  id    String @id @default(cuid())
  name  String @default("")
  posts Post[] @relation("Post_tags")
}

model User {
  id        String    @id @default(cuid())
  isActive  Boolean   @default(true)
  role      Role?     @relation("User_role", fields: [roleId], references: [id])
  roleId    String?   @map("role")
  firstName String    @default("")
  surname   String    @default("")
  email     String    @unique @default("")
  password  String
  posts     Post[]    @relation("Post_author")
  createdAt DateTime? @default(now())

  @@index([roleId])
}

model Intruder {
  id           String                    @id @default(cuid())
  manufacturer IntruderManufacturerType? @default(Unbranded)
  model        String                    @default("")
  code         String                    @default("")
}

model Block {
  id                String    @id @default(cuid())
  title             String    @default("")
  content           String    @default("")
  from_Product_info Product[] @relation("Product_info")
}

model Product {
  id             String                 @id @default(cuid())
  discipline     ProductDisciplineType?
  manufacturer   Manufacturer?          @relation("Product_manufacturer", fields: [manufacturerId], references: [id])
  manufacturerId String?                @map("manufacturer")
  name           String                 @default("")
  code           String                 @default("")
  info           Block[]                @relation("Product_info")

  @@index([manufacturerId])
}

model Manufacturer {
  id       String    @id @default(cuid())
  name     String    @default("")
  website  String    @default("")
  support  String    @default("")
  products Product[] @relation("Product_manufacturer")
}

model Role {
  id                     String  @id @default(cuid())
  name                   String  @default("")
  canViewProducts        Boolean @default(false)
  canCreateProducts      Boolean @default(false)
  canUpdateProducts      Boolean @default(false)
  canDeleteProducts      Boolean @default(false)
  canManageRoles         Boolean @default(false)
  canManageUsers         Boolean @default(false)
  canManageManufacturers Boolean @default(false)
  users                  User[]  @relation("User_role")
}

enum IntruderManufacturerType {
  Hikvision
  Dahua
  Unbranded
  Pyronix
  Texecom
  Honeywell
  Other
}

enum ProductDisciplineType {
  CCTV
  Intruder
  Fire
  AccessControl
  Other
}
